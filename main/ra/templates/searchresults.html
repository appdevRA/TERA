<!DOCTYPE html>
{% load static %}
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Results</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@400&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script> -->
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
      
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/navbarstyle.css' %}">
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
    



</head>
<style>
  .filterbutton {
  border: none;
  background: #f2f2f2;
  color: black;
  font-weight: lighter;
  padding: 10px 10px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  margin: 2px 2px;
  cursor: pointer;
}
  .filterbutton:hover{
  color: red;
}
</style>
</style>
<body style="background-color: #f3f3f3">
     <nav>
      <div class="logo"><a href="{% url 'ra:index_view'%}"><img class="logo-style" src="{% static 'images/teralogo.png' %}"></a></div>
      <label for="btn" class="icon">
        <span class=></span>
      </label>
     
      <ul>     
       
      

      
        
{% if user_id != None%}
      <li id="myAccount">   

                
                <a href="#" style="color: #8f2929">My Account <i class="fa fa-user" aria-hidden="true"></i></a>
                
                <ul>
                <li><a href="{% url 'ra:tera_dashboard_view'%}">Collections</a></li>  
                <li><a href="{% url 'ra:tera_account_settings'%}">Change pass</a></li>
                <li>
                  <form  action = "" method = "POST" autocomplete = "off" enctype="multipart/form-data">
                    {% csrf_token %}
                  <button type="submit" class="btn btn-default" name="btnLogout">Logout </button>
                  </form>
                </li>
                </ul>
      </li>
      {% endif %}
      </ul>
        </nav>
    <div class="left-tab" style="border-right:2px"></div>
<br><br>
    <div class="wrapper">
     <div class="main_content">
        <div class="header">

          <div class="wrap" style="margin-left: 20%">
                      <div class="search-container">
                        <div >
                           <form id= "form1" action = "" method = "POST" autocomplete = "off" enctype="multipart/form-data">
                            {% csrf_token %}
                            <input type="text" placeholder="" name = "searchbar" class="input" value="{{ keyword }}" style="width: 192%; height: 120%; margin-left: -67%; border-color: #f3f3f3; background-color: #f3f3f3"><hr style="width: 197%; margin-left: -59%; height: 1px; background-color: #6b6b6c; margin-top: -1.5%;">
                           <!--  <div class="autocom-box">
                              here list are inserted from javascript
                            </div> -->
                          
                            <button type="submit" class="button" style=" margin-top: .5%; margin-right: 45% ;background: none "  name="btnSearchbar" id="btnSearchbar" >
                              <i class="fa fa-search" aria-hidden="true" style=" margin-left:35% ; margin-top: 13%; border-bottom-color: #ff0000"></i></button>
                              

                              
                          </form>
                        </div>
                      </div>
                  </div>  
         
      </div>
        <center style="margin-left: 20%">
           <form id= "form1" action = "" method = "POST" autocomplete = "off" enctype="multipart/form-data">
            {% csrf_token %}

          <button type="submit" class="filterbutton" name="btnArticles" id="btnArticles" > All</button>
           <input type="button" class="filterbutton" value="|">

          <button type="submit" class="filterbutton" name="btnArticles" id="btnArticles" > Articles</button>
           <input type="button" class="filterbutton" value="|">

          <button type="submit" class="filterbutton" name="btnJournal" id="btnJournal" > Journals</button>
            <input type="button" class="filterbutton" value="|" >

          <button type="submit" class="filterbutton" name="btnBook" id="btnBook" > Book</button>
            <input type="button" class="filterbutton" value="|">
            
           
            <input type="button" class="filterbutton" value="Dissertations">
             <input type="hidden" class="filterbutton" name = "search" value="{{keyword}}">
            
           </form>
      </center>
      <div class="info">
      <br><br>
          <div style="margin-left: 12%">
<input id="user_id" value="{{user_id}}" hidden name="">
            {%for row in results %} <!-- get a row from all the rows of extracted result from the site-->
            {% with forloop.counter as outer_counter %} <!-- retrieve loop counter of the row-->
            
            {% if outer_counter <= 100 %}  <!-- for displaying number of results in the page -->

              {%for column in row %} <!-- access the columns of a row in the result -->
              

              {% if forloop.counter == 1 %}
              {% for link in links %}
              {% if forloop.counter == outer_counter %} <!-- to prevent from displaying all the links at a time -->

          
              
                      {% if type == 'springer article'%} 
                        <div>
                          <a class="btnBookmark"  >
                          <a href="{{link}}" > <b> {{column}} </b> </a>
                          {% if user_id != None %}
                            <i id="springer||{{column}}||https://www.springer.com{{link}}"class="fa fa-bookmark" style="color: red;" onClick="reply_click(this.id)"></i></a>
                          {% endif  %}
                          {% if user_id == None %}
                           <a class="btnBookmark"  ><i href="#modalLogoutForm" data-toggle="modal" data-target="#modalLogoutForm" style="color: red;"class="fa fa-bookmark"></i>
                         
                           {% endif  %}
                           </a>
                          {% if user_id != None %}

                       
                        
                        {% endif %}
                        </div> 
                      {% endif %}   


                      {% if type == 'springer book'%} 
                      <a href="https://www.springer.com{{link}}" > <b> {{column}} </b>  </a>
                        <div>
                          <a class="btnBookmark"  >
                          {% if user_id != None %}
                          
                          <i id="springer||{{column}}||https://www.springer.com{{link}}"class="fa fa-bookmark" style="color: red;" onClick="reply_click(this.id)"></i>
                          {% endif  %}
                          {% if user_id == None %}
                           <i href="#modalLogoutForm" data-toggle="modal" data-target="#modalLogoutForm" style="color: red;"class="fa fa-bookmark"></i>
                           
                         
                           {% endif  %}
                            </a>
                        </div>  <!-- to prevent from displaying all the links in at a time -->
                       
                      {% endif %}


                      {% if type == 'scienceDirectJournal' %}
                      <div>
                        <a class="btnBookmark"  >
                        <a href="https://www.sciencedirect.com/{{link}}" > <b> {{column}} </b> </a>
                        {% if user_id != None %}
                            
                            <i id="science direct||{{column}}||https://www.sciencedirect.com/{{link}}" class="fa fa-bookmark" style="color: red;" onClick="reply_click(this.id)"></i>
                        {% endif  %}

                        {% if user_id == None %}
                           <i href="#modalLogoutForm" data-toggle="modal" data-target="#modalLogoutForm" style="color: red;"class="fa fa-bookmark"></i>
                         
                           {% endif  %}

                        </a>
                      </div>  <!-- display title of links -->
                      {% endif %}
                      


                      {% if type == 'scienceDirectBook' %}
                      <div>
                        <a class="btnBookmark"  >
                        <a href="https://www.sciencedirect.com/{{link}}" > <b> {{column}} </b> </a>
                        {% if user_id != None %}
                            
                            <i id="science direct||{{column}}||https://www.sciencedirect.com/{{link}}" class="fa fa-bookmark" style="color: red;" onClick="reply_click(this.id)"></i>
                        {% endif  %}

                        {% if user_id == None %}
                           <i href="#modalLogoutForm" data-toggle="modal" data-target="#modalLogoutForm" style="color: red;"class="fa fa-bookmark"></i>
                         
                           {% endif  %}
                         </a>
                      </div>  <!-- display title of links -->
                      {% endif %}
                      

                      {% if type == 'scirp article'%} 
                        <div>
                          <a class="btnBookmark"  >
                          <a href="https://www.scirp.org/journal/{{link}}" > <b> {{column}} </b> </a>
                          {% if user_id != None %}
                              
                              <i id="scirp||{{column}}||https://www.scirp.org/journal/{{link}}" class="fa fa-bookmark" style="color: red;" onClick="reply_click(this.id)"></i>
                          {% endif  %}

                          {% if user_id == None %}
                           <i href="#modalLogoutForm" data-toggle="modal" data-target="#modalLogoutForm" style="color: red;"class="fa fa-bookmark"></i>
                         
                           {% endif  %}
                         </a>
                        </div>  <!-- to prevent from displaying all the links in at a time -->
                      {% endif %} 
                      

                      {% if type == 'tandfon article' %}
                      <div>
                        <a class="btnBookmark"  >
                            <a href="https://www.tandfonline.com{{link}}" > <b> {{column}} </b> </a>
                            {% if user_id != None %}
                                  
                                  <i id="tandfon||{{column}}||https://www.tandfonline.com{{link}}" class="fa fa-bookmark" style="color: red;" onClick="reply_click(this.id)"></i>
                            {% endif  %}

                            {% if user_id == None %}
                               <i href="#modalLogoutForm" data-toggle="modal" data-target="#modalLogoutForm" style="color: red;"class="fa fa-bookmark"></i>
                             
                            {% endif  %}
                        </a>
                      </div>  <!-- display title of links -->
                      {% endif %}

                      {% if type == 'tandfon journal' %}
                      <div >
                        <a class="btnBookmark"  >
                            <a href="https://www.tandfonline.com{{link}}" > <b> {{column}} </b> </a>
                            {% if user_id != None %}
                                  
                                  <i id="tandfon||{{column}}||https://www.tandfonline.com{{link}}" class="fa fa-bookmark" style="color: red;" onClick="reply_click(this.id)"></i>
                            {% endif  %}

                            {% if user_id == None %}
                               <i href="#modalLogoutForm" data-toggle="modal" data-target="#modalLogoutForm" style="color: red;"class="fa fa-bookmark"></i>
                             
                            {% endif  %}
                        </a>
                      </div>  <!-- display title of links -->
                      {% endif %}


                      {% if type == 'tandfon database' %}
                      <div >
                        <a class="btnBookmark"  >
                            <a href="https://www.tandfonline.com{{link}}" > <b> {{column}} </b> </a>
                             {% if user_id != None %}
                                  
                                <i id="tandfon||{{column}}||https://www.tandfonline.com{{link}}" class="fa fa-bookmark" style="color: red;" onClick="reply_click(this.id)"></i>
                              {% endif  %}


                              {% if user_id == None %}
                               <i href="#modalLogoutForm" data-toggle="modal" data-target="#modalLogoutForm" style="color: red;"class="fa fa-bookmark"></i>
                             
                            {% endif  %}
                        </a>
                      </div>  <!-- display title of links -->
                      {% endif %}


                      {% if type == 'herdinJournal' %}
                      <div >
                        <a class="btnBookmark"  >
                            <a href="https://www.ncbi.nlm.nih.gov{{link}}" > <b> {{column}} </b> </a>
                              {% if user_id != None %}
                            
                                  <i id="herdin||{{column}}||https://www.ncbi.nlm.nih.gov{{link}}" class="fa fa-bookmark" style="color: red;" onClick="reply_click(this.id)"></i>
                              {% endif  %}

                              {% if user_id == None %}
                                  <i href="#modalLogoutForm" data-toggle="modal" data-target="#modalLogoutForm" style="color: red;"class="fa fa-bookmark"></i>
                               
                              {% endif  %}
                        </a>
                      </div>  <!-- display title of links -->
                      {% endif %}


                {{break}}

              {% endif %}
              {% endfor %}
              {% endif %}

                      {% if forloop.counter == 2 %}
                      <div style="font-weight: lighter;font-size: 13px;margin-bottom: 1px">  {{ column }} </div> <!-- display author -->
                      {% endif %}

                      {% if forloop.counter == 3 %}
                      <div style="font-weight: lighter; font-size: 10px; margin-bottom:0"><i>  {{ column }} </i></div> <!-- display content type -->
                      {% endif %}

                      {% if forloop.counter == 4 %}
                      <div style="font-weight: lighter; font-size: 10px; padding-bottom: 25px"><i>  {{ column }} </i></div> <!-- display content type -->
                      {% endif %}

                      {% if forloop.counter == 5 %}
                      <div style="font-weight: lighter; font-size: 10px; padding-bottom: 25px"><i>  {{ column }} </i></div> <!-- display content type -->
                      {% endif %}

              {% endfor %}
              {% endif %}
            {% endwith %}

            {% endfor %}
            

            
            </div>
        </div>  
      </div>
    </div>
<div class="modal fade" id="modalLogoutForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"  style=“color: yellow”; >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
      
         <center> 
         <form action = "" method = "POST" autocomplete = "off" enctype="multipart/form-data">
          {% csrf_token %}
            <h4>PLEASE LOG IN</h4> <br><br>
            Bookmark feature requires an account<br>
            <b>do you want to log in?</b><br><br><br><br>
       
   
        <center>
              <div class="form-row">
                <div class="form-group col-md-6">
                <button type=“button” class="buttoncancel" data-dismiss="modal">Cancel</button>
                </div>
                <input value="search_result_view" name="previousPage" hidden>
                <div class="form-group col-md-6"> 
                    <button type="submit" name="buttonLogin"class="buttonlogout"> Login</button>
                </div> 
         </div>
      </center>
       </form> 
      </center> 
      </div>
    </div>
  </div>
</div>
</div>
    <div class="right-tab" style="border-left:2px"></div>


        <!-- <div class="header">All</div> -->
        
    </div>


    
</body>
<script src="https://unpkg.com/ionicons@5.4.0/dist/ionicons.js"></script>
</html>


<!-- 
<script type="text/javascript">
         $(document).ready(function() {
             $("#bookmarkForm").submit(function(event){
                 event.preventDefault();
                 alert($('#link').val())
                 $.ajax({
                      type:"POST",
                      url:"",
                      data:{
                        link: $('#link').val(),
                        counter: $('#counter').val(),
                        csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val()
                      }
                          });
             });
             return false;
          });
      </script> -->

<script type="text/javascript">
  
function reply_click(clicked_id){
if(document.getElementById(clicked_id).style.color == "red"){
  document.getElementById(clicked_id).style.color = "#d05858";

   $.ajax({
                      type:"POST",
                      url:"",

                      data:{
                        link: clicked_id,
                        csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val()
                      }
        }); 
}
    
else
    document.getElementById(clicked_id).style.color = "red";
            
}

function logout(){
  $.ajax({
                      type:"POST",
                      url:"",

                     
        }); 
}

$(document).ready(function() {
           var buttons = document.getElementsByClassName("fa fa-bookmark");
           
           

             
          });
            
            
</script>
